!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o(require("vue")):"function"==typeof define&&define.amd?define(["vue"],o):t.VueRescroll=o(t.Vue)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var o=function(){this.position={x:0,y:0}};o.prototype.$savePosition=function(t){return Object.assign(this.position,t)};var e=function(t){function e(o){t.call(this),this.opt=o,this.timer={},this.openScrollStore(),this.getPosition(),this.scrollTo()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(){return this.scrollTo(),this},e.prototype.openScrollStore=function(){var t=this.opt,e=t.rescroll,r=t.name;return e[r]||(e[r]=new o),this},e.prototype.getPosition=function(){var t=this,o=this.opt,e=o.dom,l=o.name,n=o.rescroll;return this.watchScroll=function(){if(l===r){var o="timer-"+l;clearTimeout(t.timer[o]),t.timer[o]=setTimeout(function(){var r={x:e.scrollLeft,y:e.scrollTop};n[l].$savePosition(r),delete t.timer[o]},1e3/60)}},e.addEventListener("scroll",this.watchScroll,!1),this},e.prototype.scrollTo=function(){var t=this.opt,o=t.dom,e=t.name,r=t.rescroll,l=r[e].position,n=l.x,i=l.y;return!r[e]||o.scrollHeight<i||o.scrollWidth<n?(o.scrollLeft=0,o.scrollTop=0,this):(this.$nextTick(function(){o.scrollLeft=n,o.scrollTop=i}),this)},e.prototype.destroy=function(){var t=this.opt.dom;return this.watchScroll&&t.removeEventListener("scroll",this.watchScroll,!1),this},e}(t),r="",l={inserted:function(t,o,l){if(r=o.value.name,!l.context)return this;if(!l.context.$root)return this;var n=l.context.$root;n.$rescroll||(n.$rescroll={});var i={dom:t,name:o.value.name,rescroll:n.$rescroll};return t.restoreScroll||(t.restoreScroll={}),t.restoreScroll[r]?(t.restoreScroll[r].update(i),this):(t.restoreScroll[r]=new e(i),this)},componentUpdated:function(t,o,l){if(r=o.value.name,!l.context)return this;if(!l.context.$root)return this;var n=l.context.$root;n.$rescroll||(n.$rescroll={});var i={dom:t,name:o.value.name,rescroll:n.$rescroll};return t.restoreScroll||(t.restoreScroll={}),t.restoreScroll[r]?(t.restoreScroll[r].update(i),this):(t.restoreScroll[r]=new e(i),this)},unbind:function(t){t.restoreScroll[r].destroy(),delete t.restoreScroll}};return{install:function(t){t.directive("rescroll",l)}}});
