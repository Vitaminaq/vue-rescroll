!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("vue")):"function"==typeof define&&define.amd?define(["vue"],e):t.VueRescroll=e(t.Vue)}(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(){this.position={x:0,y:0}};e.prototype.$savePosition=function(t){return Object.assign(this.position,t)};var o=function(t){function o(e){t.call(this),this.opt=e,this.timer={},this.openScrollStore(),this.getPosition(),this.scrollTo()}return t&&(o.__proto__=t),o.prototype=Object.create(t&&t.prototype),o.prototype.constructor=o,o.prototype.update=function(){return this.scrollTo(),this},o.prototype.openScrollStore=function(){var t=this.opt,o=t.rescroll,r=t.name;return o[r]||(o[r]=new e),this},o.prototype.getPosition=function(){var t=this,e=this.opt,o=e.dom,l=e.name,n=e.rescroll;return this.watchScroll=function(){if(l===r){var e="timer-"+l;clearTimeout(t.timer[e]),t.timer[e]=setTimeout(function(){var r={x:o.scrollLeft,y:o.scrollTop};n[l].$savePosition(r),delete t.timer[e]},1e3/60)}},o.addEventListener("scroll",this.watchScroll,!1),this},o.prototype.scrollTo=function(){var t=this.opt,e=t.dom,o=t.name,r=t.rescroll,l=r[o].position,n=l.x,i=l.y;return!r[o]||e.scrollHeight<i||e.scrollWidth<n?(e.scrollLeft=0,e.scrollTop=0,this):(this.$nextTick(function(){e.scrollLeft=n,e.scrollTop=i}),this)},o.prototype.destroy=function(){var t=this.opt.dom;return this.watchScroll&&t.removeEventListener("scroll",this.watchScroll,!1),this},o}(t),r="",l={inserted:function(t,e,l){if(r=e.value.name,!l.context)return this;if(!l.context.$root)return this;var n=l.context.$root;n.$rescroll||(n.$rescroll={});var i={dom:t,name:e.value.name,rescroll:n.$rescroll};return t.restoreScroll||(t.restoreScroll={}),t.restoreScroll[r]?(t.restoreScroll[r].update(i),this):(t.restoreScroll[r]=new o(i),this)},componentUpdated:function(t,e,l){if(r=e.value.name,!l.context)return this;if(!l.context.$root)return this;var n=l.context.$root;n.$rescroll||(n.$rescroll={});var i={dom:t,name:e.value.name,rescroll:n.$rescroll};return t.restoreScroll||(t.restoreScroll={}),t.restoreScroll[r]?(t.restoreScroll[r].update(i),this):(t.restoreScroll[r]=new o(i),this)},unbind:function(t){t.restoreScroll[r].destroy(),delete t.restoreScroll}},n={install:function(t){t.directive("rescroll",l)}};return"undefined"!=typeof window&&window.Vue.use(n),n});
